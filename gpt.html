<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KxN</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
<style>
  :root {
    --pink: #ff4fc3;
    --pink-light: #ff7bdc;
    --bg: #000;
    --gold: #ffd700;
  }
  * { box-sizing: border-box; }
  body {
    margin:0; background:var(--bg); color:var(--pink);
    font-family:'Press Start 2P',cursive;
    text-align:center; padding:20px;
  }

  /* LOADING */
  #loading {
    margin-top:30vh;
    font-size:22px;
    color:var(--pink);
    animation:glitch 1s infinite;
  }
  @keyframes glitch {
    0% { text-shadow:2px 0 red,-2px 0 cyan; }
    50% { text-shadow:-2px 2px red,2px -2px cyan; }
    100% { text-shadow:0 0 red,0 0 cyan; }
  }
  #app { display:none; }

  /* Judul */
  h1 {
    font-size:26px;
    color:var(--gold);
    text-shadow:0 0 8px var(--gold), 0 0 20px var(--pink);
    margin-bottom:18px;
  }

  /* Card */
  .card {
    max-width:520px; width:95%; margin:0 auto;
    background:#111; border:4px solid var(--pink);
    border-radius:18px;
    padding:20px;
    box-shadow:0 0 18px var(--pink), 0 0 38px var(--pink);
  }

  /* Input */
  .inputWrap {
    margin-bottom:16px;
    box-shadow:inset 0 0 14px var(--pink);
  }
  input {
    width:100%;
    font-size:18px;
    background:var(--bg);
    color:var(--pink-light);
    border:2px solid var(--pink);
    border-radius:8px;
    padding:12px;
    text-align:center;
    font-family:'Press Start 2P',cursive;
  }

  /* Buttons */
  button {
    width:100%;
    padding:14px;
    margin:8px 0;
    background:var(--pink);
    color:#000;
    font-family:'Press Start 2P',cursive;
    font-size:12px;
    border:3px solid var(--pink-light);
    border-radius:10px;
    cursor:pointer;
    text-transform:uppercase;
    box-shadow:0 0 10px var(--pink), 0 0 20px var(--pink);
  }
  button:hover {
    background:var(--pink-light);
  }

  #hasil {
    margin-top:10px;
    font-size:14px;
    color:var(--pink-light);
    line-height:1.8em;
  }
  .gold {
    color:var(--gold);
    text-shadow:0 0 8px var(--gold);
  }

  .mode {
    font-size:12px;
    margin-top:10px;
    color:var(--pink-light);
  }

  hr.sep {
    border:0;
    border-top:2px solid var(--pink);
    margin:18px 0;
  }

  /* Tabel Riwayat */
  .tableWrap {
    max-height:260px;
    overflow:auto;
    border:3px solid var(--pink);
    border-radius:14px;
    box-shadow:inset 0 0 14px var(--pink);
  }
  table {
    width:100%;
    border-collapse:collapse;
  }
  thead th {
    background:#111;
    color:var(--pink-light);
    font-size:10px;
    padding:8px;
    border-bottom:2px solid var(--pink);
    position:sticky;
    top:0;
    z-index:1;
  }
  tbody td {
    font-size:10px;
    padding:8px;
    border-top:1px solid var(--pink-light);
    color:#fff;
    text-align:center;
  }
  td.pred { color:var(--gold); }
  td.hasil { color:var(--gold); }

  /* Scrollbar neon */
  ::-webkit-scrollbar {
    width:8px;
  }
  ::-webkit-scrollbar-thumb {
    background:var(--pink);
    box-shadow:0 0 10px var(--pink);
  }
  ::-webkit-scrollbar-track {
    background:#111;
  }
</style>
</head>
<body>
<div id="loading">LOADING...</div>

<div id="app">
  <h1>KxN</h1>
  <div class="card">
    <div class="inputWrap">
      <input id="angka" type="number" placeholder="Masukkan angka" />
    </div>
    <button onclick="prediksiKB()">‚ö° PREDIKSI K/B</button>
    <div id="hasil"></div>
    <div id="aksi" style="display:none">
      <button onclick="catat('WIN')">‚úî WIN</button>
      <button onclick="catat('LOSE')">‚úñ LOSE</button>
    </div>
    <div class="mode">Mode: <span id="modeTxt">FIX</span></div>
    <hr class="sep" />
    <div style="text-align:left;color:var(--pink-light);margin-bottom:6px;">üìú Riwayat:</div>
    <div class="tableWrap">
      <table>
        <thead>
          <tr>
            <th>Waktu</th>
            <th>Dadu</th>
            <th>Prediksi</th>
            <th>Hasil</th>
          </tr>
        </thead>
        <tbody id="tbRiwayat"></tbody>
      </table>
    </div>
    <button onclick="resetRiwayat()">‚ôª RESET RIWAYAT</button>
    <button onclick="downloadRiwayat()">üì• DOWNLOAD</button>
  </div>
</div>

<script>
  setTimeout(()=>{
    document.getElementById('loading').style.display='none';
    document.getElementById('app').style.display='block';
  }, 1200);

  const POLA = {
    16:"K",17:"B",18:"B",19:"K",20:"B",21:"K",22:"B",23:"B",24:"B",25:"K",
    26:"B",27:"B",28:"B",29:"K",30:"K",31:"K",32:"B",33:"B",34:"K",35:"K",
    36:"B",37:"K",38:"B",39:"B",40:"B",41:"B",42:"B",43:"K"
  };

  let mode = localStorage.getItem('kx_mode') || 'FIX';
  document.getElementById('modeTxt').textContent = mode;

  let riwayat = JSON.parse(localStorage.getItem('kx_riwayat')||'[]');
  let lastPred = "";

  function renderRiwayat(){
    const tbody = document.getElementById('tbRiwayat');
    tbody.innerHTML = "";
    [...riwayat].reverse().forEach(r=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${r.waktu}</td>
        <td>${r.dadu}</td>
        <td class="pred">${r.prediksi}</td>
        <td class="hasil">${r.hasil}</td>
      `;
      tbody.appendChild(tr);
    });
  }
  renderRiwayat();

  function prediksiKB(){
    const val = parseInt(document.getElementById('angka').value);
    const hasilEl = document.getElementById('hasil');
    const aksiEl = document.getElementById('aksi');

    if(isNaN(val)){ hasilEl.textContent="‚ö† Masukkan angka!"; aksiEl.style.display="none"; return; }
    if(!POLA[val]){ hasilEl.textContent="‚ùå Angka tidak ada di pola!"; aksiEl.style.display="none"; return; }

    hasilEl.innerHTML = `<span class="gold" style="animation:glitch .6s infinite">LOADING...</span>`;
    aksiEl.style.display="none";

    setTimeout(()=>{
      let pred = POLA[val];
      if(mode === 'ZIGZAG') pred = (pred==='K')?'B':'K';

      lastPred = pred;
      hasilEl.innerHTML = `üé≤ Angka <span class="gold">${val}</span><br>üìå Prediksi: <span class="gold" style="font-size:16px">${pred}</span>`;
      aksiEl.style.display="block";
    }, 600);
  }

  function catat(hasil){
    const val = document.getElementById('angka').value;
    if(!val || !lastPred) return;
    const waktu = new Date().toLocaleTimeString();

    riwayat.push({waktu, dadu: val, prediksi:lastPred, hasil});
    localStorage.setItem('kx_riwayat', JSON.stringify(riwayat));

    mode = (hasil==='WIN')?'FIX':'ZIGZAG';
    localStorage.setItem('kx_mode', mode);
    document.getElementById('modeTxt').textContent = mode;

    renderRiwayat();
    document.getElementById('aksi').style.display="none";
    document.getElementById('hasil').textContent="";
    lastPred="";
  }

  function resetRiwayat(){
    if(!confirm('Yakin reset riwayat?')) return;
    riwayat=[]; localStorage.removeItem('kx_riwayat');
    renderRiwayat();
  }

  function downloadRiwayat(){
    let txt = '----\n';
    riwayat.forEach(r=>{
      txt += `${r.waktu} | ${r.dadu} | ${r.prediksi} | ${r.hasil}\n`;
    });
    const blob = new Blob([txt],{type:'text/plain'});
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download='KxN.txt';
    document.body.appendChild(a); a.click(); document.body.removeChild(a);
  }
</script>
</body>
</html>